<!DOCTYPE html>
<html>
<head>
<title>Luracast Restler 3 Live Examples:- Protected API</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link rel="stylesheet" type="text/css" href="../resources/bootstrap.min.css" />

<link rel="stylesheet" type="text/css" href="../resources/style.css" />

<link rel="stylesheet" type="text/css" href="../resources/jquery.snippet.min.css" />

<link rel="stylesheet" type="text/css" href="../resources/facebox.css" />

<link rel="stylesheet" type="text/css" href="../resources/hacks.css" />
 
<script type="text/javascript" src="../resources/jquery-1.7.2.min.js"></script>

<script type="text/javascript" src="../resources/jquery.snippet.min.js"></script>

<script type="text/javascript" src="../resources/facebox.js"></script>

<script type="text/javascript" src="../resources/bootstrap.min.js"></script>

<script type="text/javascript">
	$(document).ready(
			function() {
				//$('a[target*=_blank]').facebox();
				$("abbr").click(
						function() {
							$('#codeviewer').load(
									'../resources/getsource.php?file='
											+ $(this).attr("title"),
									function() {
										$("pre#php").snippet("php", {
											style : "acid",
											showNum : false
										});
										jQuery.facebox({
											div : '#codeviewer'
										});
									});
						});
				var curURL = window.location.pathname.split('/examples/')[1];
				if (curURL == '')
					curURL = 'index.html';
				$("a").each(function() {
					if ($(this).attr("href").indexOf(curURL) > -1) {
						$(this).addClass("active");
					}
				});

				$('#right tag').popover({
					html : true,
					placement : 'left',
					trigger : 'manual',
					title : 'Tagged Examples',
					content : '...'
				}).click(function(e) {
					$('#right tag').popover('hide');
					$(this).popover('show');
					e.preventDefault();
					e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;
				});

				$(document).click(function(e) {
					$('#right tag').popover('hide');
				});
			})
</script>
<!--[if lte IE 8]>
<script type="text/javascript">
(function(){if(!/*@cc_on!@*/0)return;var e = "abbr,article,aside,audio,bb,canvas,datagrid,datalist,details,dialog,eventsource,figure,footer,header,hgroup,mark,menu,meter,nav,output,progress,section,time,video,tag".split(',');for(var i=0;i<e.length;i++){document.createElement(e[i])}})()
</script>
<![endif]-->
</head>
<body>
	<nav class="floating-menu">
<ul>
<li><a title="Restler Home" href="http://luracast.com/products/restler/">Home</a></li>
<!--<li><a title="Using Restler" href="#">Guide</a></li><li><a title="Restler API Reference" href="#">API</a></li>-->
<li><a class="active" href="../index.html">Examples</a></li>
<li><a title="Share your knowledge by answering user questions in Stack Overflow." href="http://bit.ly/Restler-QA">Support</a></li>
<li><a title="Contribute and Fork Restler on GitHub" href="http://bit.ly/LuracastRestler">GitHub</a></li>
<li><a title="Get updated on Twitter" href="http://twitter.com/Luracast">Twitter</a></li>
</ul>
</nav>
	<div id="codeviewer" style="display: none;"></div>
	<nav id="left">
		<img src="../resources/Restler3.gif" width="126"
			height="126" title="Luracast Restler 3" />
		<h3>
			<a href="../index.html">Examples</a>
		</h3>
		<ul>
			
			<li><a href="../_001_helloworld/readme.html" title="Let's say hello!">Hello World</a></li>
			<li><a href="../_002_minimal/readme.html" title="Less is more">Minimal</a></li>
			<li><a href="../_003_multiformat/readme.html" title="Serving what the client wants">Multi-format</a></li>
			<li><a href="../_004_error_response/readme.html" title="Making use of HTTP status codes">Error Response</a></li>
			<li><a href="../_005_protected_api/readme.html" title="Creating restricted zone">Protected API</a></li>
			<li><a href="../_006_crud/readme.html" title="using POST, GET, PUT and DELETE">CRUD</a></li>
		</ul>
	</nav>
	<nav id="right">
		<h3><a href="../index.html">Examples by Tag</a></h3>
		<ul class="tags">
<li><tag title="Authentication Example(s)" data-content="&lt;a href=&quot;../_005_protected_api/readme.html&quot;&gt;Protected API&lt;/a&gt;">authentication</tag></li>

<li><tag title="Authorization Example(s)" data-content="&lt;a href=&quot;../_005_protected_api/readme.html&quot;&gt;Protected API&lt;/a&gt;">authorization</tag></li>

<li><tag title="Basic Example(s)" data-content="&lt;a href=&quot;../_001_helloworld/readme.html&quot;&gt;Hello World Example&lt;/a&gt; &lt;a href=&quot;../_002_minimal/readme.html&quot;&gt;Minimal Example&lt;/a&gt;">basic</tag><badge>2</badge></li>

<li><tag title="Create Example(s)" data-content="&lt;a href=&quot;../_006_crud/readme.html&quot;&gt;CRUD&lt;/a&gt;">create</tag></li>

<li><tag title="Delete Example(s)" data-content="&lt;a href=&quot;../_006_crud/readme.html&quot;&gt;CRUD&lt;/a&gt;">delete</tag></li>

<li><tag title="Exception Example(s)" data-content="&lt;a href=&quot;../_004_error_response/readme.html&quot;&gt;Error Response&lt;/a&gt;">exception</tag></li>

<li><tag title="Get Example(s)" data-content="&lt;a href=&quot;../_006_crud/readme.html&quot;&gt;CRUD&lt;/a&gt;">get</tag></li>

<li><tag title="Http Status Example(s)" data-content="&lt;a href=&quot;../_002_minimal/readme.html&quot;&gt;Minimal Example&lt;/a&gt; &lt;a href=&quot;../_004_error_response/readme.html&quot;&gt;Error Response&lt;/a&gt;">http status</tag><badge>2</badge></li>

<li><tag title="Json Example(s)" data-content="&lt;a href=&quot;../_003_multiformat/readme.html&quot;&gt;Multi-format&lt;/a&gt;">json</tag></li>

<li><tag title="Post Example(s)" data-content="&lt;a href=&quot;../_006_crud/readme.html&quot;&gt;CRUD&lt;/a&gt;">post</tag></li>

<li><tag title="Put Example(s)" data-content="&lt;a href=&quot;../_006_crud/readme.html&quot;&gt;CRUD&lt;/a&gt;">put</tag></li>

<li><tag title="Read Example(s)" data-content="&lt;a href=&quot;../_006_crud/readme.html&quot;&gt;CRUD&lt;/a&gt;">read</tag></li>

<li><tag title="Retrieve Example(s)" data-content="&lt;a href=&quot;../_006_crud/readme.html&quot;&gt;CRUD&lt;/a&gt;">retrieve</tag></li>

<li><tag title="Routing Example(s)" data-content="&lt;a href=&quot;../_006_crud/readme.html&quot;&gt;CRUD&lt;/a&gt;">routing</tag></li>

<li><tag title="Update Example(s)" data-content="&lt;a href=&quot;../_006_crud/readme.html&quot;&gt;CRUD&lt;/a&gt;">update</tag></li>

<li><tag title="Validation Example(s)" data-content="&lt;a href=&quot;../_002_minimal/readme.html&quot;&gt;Minimal Example&lt;/a&gt; &lt;a href=&quot;../_004_error_response/readme.html&quot;&gt;Error Response&lt;/a&gt;">validation</tag><badge>2</badge></li>

<li><tag title="Xml Example(s)" data-content="&lt;a href=&quot;../_003_multiformat/readme.html&quot;&gt;Multi-format&lt;/a&gt;">xml</tag></li>
</ul>
	</nav>
	<article id="page">
<div class="right"><small>5</small></div>
<h2>Protected API</h2>

<p><tag>authentication</tag>
<tag>authorization</tag></p>

<p>Not all the API exposed needs to be public, we need to protect some of our API.
 Here are three ways to protect a method</p>

<ol>
<li>Change it to a <code>protected function</code></li>
<li>Add a PHPDoc comment <code>@protected</code> to the method</li>
<li><p>Add <code>@protected</code> comment to the class to protect all methods of that class</p>

<p>In order to provide access to those protected methods we use a class that implements <code>iAuthenticate</code>. Also note that
An Authentication class is also an API class so all public methods that does not begin with <code>_</code> will be exposed as API
for example <a href="simpleauth/key" target="_blank">SimpleAuth::key</a>. It can be used to create login/logout methods.</p>

<blockquote>
  <p>This API Server is made using the following php files/folders</p>
</blockquote></li>
</ol>

<blockquote>
  <ul>
  <li><abbr title="_005_protected_api/index.php">index.php</abbr>      (gateway)</li>
  <li><abbr title="_005_protected_api/simple.php">Simple.php</abbr>      (api)</li>
  <li><abbr title="_005_protected_api/secured.php">Secured.php</abbr>      (api)</li>
  <li><abbr title="_005_protected_api/simpleauth.php">SimpleAuth.php</abbr>      (auth)</li>
  <li><abbr title="../restler/restler.php">restler.php</abbr>      (framework)</li>
  </ul>
</blockquote>

<p>This API Server exposes the following URIs</p>

<pre><code>GET normal                     ⇠ Simple::normal()
GET restricted                 ⇠ Simple::restricted()
GET restricted2                ⇠ Simple::restricted2()
GET secured                    ⇠ Secured::index()
GET simpleauth/isauthenticated ⇠ SimpleAuth::isAuthenticated()
GET simpleauth/key             ⇠ SimpleAuth::key()
</code></pre>

<p>Try the following links in your browser</p>

<dl>
<dt>GET <a href="index.php/restricted" target="_blank">restricted</a></dt>
<dd>
<pre><code>{
  "error": {
    "code": 401,
    "message": "Unauthorized"
  }
}
</code></pre>
</dd>

<dt>GET <a href="index.php/restricted?key=rEsTlEr2" target="_blank">restricted?key=rEsTlEr2</a></dt>
<dd><pre><code>"protected method"
</code></pre></dd>

<dl>
<dt>GET <a href="index.php/secured?key=rEsTlEr2" target="_blank">secured?key=rEsTlEr2</a></dt>
<dd>
<pre><code>"protected class"
</code></pre>
</dd>
</dl>

</article>
<footer>
&#169; 2010 <a title="Luracast.com" href="http://luracast.com"><img src="../resources/Luracast_dark.png" width="180" height="32" title="Helping Developers with Tools, Utilities, Frameworks and Services"/></a>
</footer>
</body>
</html>